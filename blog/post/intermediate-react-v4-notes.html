<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>Intermediate React, v4 - Notes - Blog - alifiarahmah&#x27;s homepage</title><link rel="icon" href="/favicon.ico"/><meta name="next-head-count" content="4"/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-eeb1e4a6befe36e1.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-7ca0c04a95757ac7.js" defer=""></script><script src="/_next/static/chunks/pages/_app-00bc1c565a4df2e2.js" defer=""></script><script src="/_next/static/chunks/252f366e-fd2c692c91d03862.js" defer=""></script><script src="/_next/static/chunks/0c428ae2-883d5f6e7aa77c47.js" defer=""></script><script src="/_next/static/chunks/d7eeaac4-0642c713d7634d3a.js" defer=""></script><script src="/_next/static/chunks/440-83fb2f235aa2c2ff.js" defer=""></script><script src="/_next/static/chunks/792-6bd6810f984318f6.js" defer=""></script><script src="/_next/static/chunks/pages/blog/post/%5Bslug%5D-86f2e727c9110796.js" defer=""></script><script src="/_next/static/FOJfMnHBnYPL-pV1-BhdU/_buildManifest.js" defer=""></script><script src="/_next/static/FOJfMnHBnYPL-pV1-BhdU/_ssgManifest.js" defer=""></script></head><body><script id="chakra-script">!(function(){try{var a=function(c){var v="(prefers-color-scheme: dark)",h=window.matchMedia(v).matches?"dark":"light",r=c==="system"?h:c,o=document.documentElement,s=document.body,l="chakra-ui-light",d="chakra-ui-dark",i=r==="dark";return s.classList.add(i?d:l),s.classList.remove(i?l:d),o.style.colorScheme=r,o.dataset.theme=r,r},n=a,m="light",e="chakra-ui-color-mode",t=localStorage.getItem(e);t?a(t):localStorage.setItem(e,a(m))}catch(a){}})();</script><div id="__next"><style data-emotion="css-global l02lil">:host,:root,[data-theme]{--chakra-ring-inset:var(--chakra-empty,/*!*/ /*!*/);--chakra-ring-offset-width:0px;--chakra-ring-offset-color:#fff;--chakra-ring-color:rgba(66, 153, 225, 0.6);--chakra-ring-offset-shadow:0 0 #0000;--chakra-ring-shadow:0 0 #0000;--chakra-space-x-reverse:0;--chakra-space-y-reverse:0;--chakra-colors-transparent:transparent;--chakra-colors-current:currentColor;--chakra-colors-black:#000000;--chakra-colors-white:#FFFFFF;--chakra-colors-whiteAlpha-50:rgba(255, 255, 255, 0.04);--chakra-colors-whiteAlpha-100:rgba(255, 255, 255, 0.06);--chakra-colors-whiteAlpha-200:rgba(255, 255, 255, 0.08);--chakra-colors-whiteAlpha-300:rgba(255, 255, 255, 0.16);--chakra-colors-whiteAlpha-400:rgba(255, 255, 255, 0.24);--chakra-colors-whiteAlpha-500:rgba(255, 255, 255, 0.36);--chakra-colors-whiteAlpha-600:rgba(255, 255, 255, 0.48);--chakra-colors-whiteAlpha-700:rgba(255, 255, 255, 0.64);--chakra-colors-whiteAlpha-800:rgba(255, 255, 255, 0.80);--chakra-colors-whiteAlpha-900:rgba(255, 255, 255, 0.92);--chakra-colors-blackAlpha-50:rgba(0, 0, 0, 0.04);--chakra-colors-blackAlpha-100:rgba(0, 0, 0, 0.06);--chakra-colors-blackAlpha-200:rgba(0, 0, 0, 0.08);--chakra-colors-blackAlpha-300:rgba(0, 0, 0, 0.16);--chakra-colors-blackAlpha-400:rgba(0, 0, 0, 0.24);--chakra-colors-blackAlpha-500:rgba(0, 0, 0, 0.36);--chakra-colors-blackAlpha-600:rgba(0, 0, 0, 0.48);--chakra-colors-blackAlpha-700:rgba(0, 0, 0, 0.64);--chakra-colors-blackAlpha-800:rgba(0, 0, 0, 0.80);--chakra-colors-blackAlpha-900:rgba(0, 0, 0, 0.92);--chakra-colors-gray-50:#F7FAFC;--chakra-colors-gray-100:#EDF2F7;--chakra-colors-gray-200:#E2E8F0;--chakra-colors-gray-300:#CBD5E0;--chakra-colors-gray-400:#A0AEC0;--chakra-colors-gray-500:#718096;--chakra-colors-gray-600:#4A5568;--chakra-colors-gray-700:#2D3748;--chakra-colors-gray-800:#1A202C;--chakra-colors-gray-900:#171923;--chakra-colors-red-50:#FFF5F5;--chakra-colors-red-100:#FED7D7;--chakra-colors-red-200:#FEB2B2;--chakra-colors-red-300:#FC8181;--chakra-colors-red-400:#F56565;--chakra-colors-red-500:#E53E3E;--chakra-colors-red-600:#C53030;--chakra-colors-red-700:#9B2C2C;--chakra-colors-red-800:#822727;--chakra-colors-red-900:#63171B;--chakra-colors-orange-50:#FFFAF0;--chakra-colors-orange-100:#FEEBC8;--chakra-colors-orange-200:#FBD38D;--chakra-colors-orange-300:#F6AD55;--chakra-colors-orange-400:#ED8936;--chakra-colors-orange-500:#DD6B20;--chakra-colors-orange-600:#C05621;--chakra-colors-orange-700:#9C4221;--chakra-colors-orange-800:#7B341E;--chakra-colors-orange-900:#652B19;--chakra-colors-yellow-50:#FFFFF0;--chakra-colors-yellow-100:#FEFCBF;--chakra-colors-yellow-200:#FAF089;--chakra-colors-yellow-300:#F6E05E;--chakra-colors-yellow-400:#ECC94B;--chakra-colors-yellow-500:#D69E2E;--chakra-colors-yellow-600:#B7791F;--chakra-colors-yellow-700:#975A16;--chakra-colors-yellow-800:#744210;--chakra-colors-yellow-900:#5F370E;--chakra-colors-green-50:#F0FFF4;--chakra-colors-green-100:#C6F6D5;--chakra-colors-green-200:#9AE6B4;--chakra-colors-green-300:#68D391;--chakra-colors-green-400:#48BB78;--chakra-colors-green-500:#38A169;--chakra-colors-green-600:#2F855A;--chakra-colors-green-700:#276749;--chakra-colors-green-800:#22543D;--chakra-colors-green-900:#1C4532;--chakra-colors-teal-50:#E6FFFA;--chakra-colors-teal-100:#B2F5EA;--chakra-colors-teal-200:#81E6D9;--chakra-colors-teal-300:#4FD1C5;--chakra-colors-teal-400:#38B2AC;--chakra-colors-teal-500:#319795;--chakra-colors-teal-600:#2C7A7B;--chakra-colors-teal-700:#285E61;--chakra-colors-teal-800:#234E52;--chakra-colors-teal-900:#1D4044;--chakra-colors-blue-50:#ebf8ff;--chakra-colors-blue-100:#bee3f8;--chakra-colors-blue-200:#90cdf4;--chakra-colors-blue-300:#63b3ed;--chakra-colors-blue-400:#4299e1;--chakra-colors-blue-500:#3182ce;--chakra-colors-blue-600:#2b6cb0;--chakra-colors-blue-700:#2c5282;--chakra-colors-blue-800:#2a4365;--chakra-colors-blue-900:#1A365D;--chakra-colors-cyan-50:#EDFDFD;--chakra-colors-cyan-100:#C4F1F9;--chakra-colors-cyan-200:#9DECF9;--chakra-colors-cyan-300:#76E4F7;--chakra-colors-cyan-400:#0BC5EA;--chakra-colors-cyan-500:#00B5D8;--chakra-colors-cyan-600:#00A3C4;--chakra-colors-cyan-700:#0987A0;--chakra-colors-cyan-800:#086F83;--chakra-colors-cyan-900:#065666;--chakra-colors-purple-50:#FAF5FF;--chakra-colors-purple-100:#E9D8FD;--chakra-colors-purple-200:#D6BCFA;--chakra-colors-purple-300:#B794F4;--chakra-colors-purple-400:#9F7AEA;--chakra-colors-purple-500:#805AD5;--chakra-colors-purple-600:#6B46C1;--chakra-colors-purple-700:#553C9A;--chakra-colors-purple-800:#44337A;--chakra-colors-purple-900:#322659;--chakra-colors-pink-50:#FFF5F7;--chakra-colors-pink-100:#FED7E2;--chakra-colors-pink-200:#FBB6CE;--chakra-colors-pink-300:#F687B3;--chakra-colors-pink-400:#ED64A6;--chakra-colors-pink-500:#D53F8C;--chakra-colors-pink-600:#B83280;--chakra-colors-pink-700:#97266D;--chakra-colors-pink-800:#702459;--chakra-colors-pink-900:#521B41;--chakra-colors-linkedin-50:#E8F4F9;--chakra-colors-linkedin-100:#CFEDFB;--chakra-colors-linkedin-200:#9BDAF3;--chakra-colors-linkedin-300:#68C7EC;--chakra-colors-linkedin-400:#34B3E4;--chakra-colors-linkedin-500:#00A0DC;--chakra-colors-linkedin-600:#008CC9;--chakra-colors-linkedin-700:#0077B5;--chakra-colors-linkedin-800:#005E93;--chakra-colors-linkedin-900:#004471;--chakra-colors-facebook-50:#E8F4F9;--chakra-colors-facebook-100:#D9DEE9;--chakra-colors-facebook-200:#B7C2DA;--chakra-colors-facebook-300:#6482C0;--chakra-colors-facebook-400:#4267B2;--chakra-colors-facebook-500:#385898;--chakra-colors-facebook-600:#314E89;--chakra-colors-facebook-700:#29487D;--chakra-colors-facebook-800:#223B67;--chakra-colors-facebook-900:#1E355B;--chakra-colors-messenger-50:#D0E6FF;--chakra-colors-messenger-100:#B9DAFF;--chakra-colors-messenger-200:#A2CDFF;--chakra-colors-messenger-300:#7AB8FF;--chakra-colors-messenger-400:#2E90FF;--chakra-colors-messenger-500:#0078FF;--chakra-colors-messenger-600:#0063D1;--chakra-colors-messenger-700:#0052AC;--chakra-colors-messenger-800:#003C7E;--chakra-colors-messenger-900:#002C5C;--chakra-colors-whatsapp-50:#dffeec;--chakra-colors-whatsapp-100:#b9f5d0;--chakra-colors-whatsapp-200:#90edb3;--chakra-colors-whatsapp-300:#65e495;--chakra-colors-whatsapp-400:#3cdd78;--chakra-colors-whatsapp-500:#22c35e;--chakra-colors-whatsapp-600:#179848;--chakra-colors-whatsapp-700:#0c6c33;--chakra-colors-whatsapp-800:#01421c;--chakra-colors-whatsapp-900:#001803;--chakra-colors-twitter-50:#E5F4FD;--chakra-colors-twitter-100:#C8E9FB;--chakra-colors-twitter-200:#A8DCFA;--chakra-colors-twitter-300:#83CDF7;--chakra-colors-twitter-400:#57BBF5;--chakra-colors-twitter-500:#1DA1F2;--chakra-colors-twitter-600:#1A94DA;--chakra-colors-twitter-700:#1681BF;--chakra-colors-twitter-800:#136B9E;--chakra-colors-twitter-900:#0D4D71;--chakra-colors-telegram-50:#E3F2F9;--chakra-colors-telegram-100:#C5E4F3;--chakra-colors-telegram-200:#A2D4EC;--chakra-colors-telegram-300:#7AC1E4;--chakra-colors-telegram-400:#47A9DA;--chakra-colors-telegram-500:#0088CC;--chakra-colors-telegram-600:#007AB8;--chakra-colors-telegram-700:#006BA1;--chakra-colors-telegram-800:#005885;--chakra-colors-telegram-900:#003F5E;--chakra-borders-none:0;--chakra-borders-1px:1px solid;--chakra-borders-2px:2px solid;--chakra-borders-4px:4px solid;--chakra-borders-8px:8px solid;--chakra-fonts-heading:'Ubuntu',system-ui,sans-serif;--chakra-fonts-body:'Ubuntu',system-ui,sans-serif;--chakra-fonts-mono:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--chakra-fontSizes-xs:0.75rem;--chakra-fontSizes-sm:0.875rem;--chakra-fontSizes-md:1rem;--chakra-fontSizes-lg:1.125rem;--chakra-fontSizes-xl:1.25rem;--chakra-fontSizes-2xl:1.5rem;--chakra-fontSizes-3xl:1.875rem;--chakra-fontSizes-4xl:2.25rem;--chakra-fontSizes-5xl:3rem;--chakra-fontSizes-6xl:3.75rem;--chakra-fontSizes-7xl:4.5rem;--chakra-fontSizes-8xl:6rem;--chakra-fontSizes-9xl:8rem;--chakra-fontWeights-hairline:100;--chakra-fontWeights-thin:200;--chakra-fontWeights-light:300;--chakra-fontWeights-normal:400;--chakra-fontWeights-medium:500;--chakra-fontWeights-semibold:600;--chakra-fontWeights-bold:700;--chakra-fontWeights-extrabold:800;--chakra-fontWeights-black:900;--chakra-letterSpacings-tighter:-0.05em;--chakra-letterSpacings-tight:-0.025em;--chakra-letterSpacings-normal:0;--chakra-letterSpacings-wide:0.025em;--chakra-letterSpacings-wider:0.05em;--chakra-letterSpacings-widest:0.1em;--chakra-lineHeights-3:.75rem;--chakra-lineHeights-4:1rem;--chakra-lineHeights-5:1.25rem;--chakra-lineHeights-6:1.5rem;--chakra-lineHeights-7:1.75rem;--chakra-lineHeights-8:2rem;--chakra-lineHeights-9:2.25rem;--chakra-lineHeights-10:2.5rem;--chakra-lineHeights-normal:normal;--chakra-lineHeights-none:1;--chakra-lineHeights-shorter:1.25;--chakra-lineHeights-short:1.375;--chakra-lineHeights-base:1.5;--chakra-lineHeights-tall:1.625;--chakra-lineHeights-taller:2;--chakra-radii-none:0;--chakra-radii-sm:0.125rem;--chakra-radii-base:0.25rem;--chakra-radii-md:0.375rem;--chakra-radii-lg:0.5rem;--chakra-radii-xl:0.75rem;--chakra-radii-2xl:1rem;--chakra-radii-3xl:1.5rem;--chakra-radii-full:9999px;--chakra-space-1:0.25rem;--chakra-space-2:0.5rem;--chakra-space-3:0.75rem;--chakra-space-4:1rem;--chakra-space-5:1.25rem;--chakra-space-6:1.5rem;--chakra-space-7:1.75rem;--chakra-space-8:2rem;--chakra-space-9:2.25rem;--chakra-space-10:2.5rem;--chakra-space-12:3rem;--chakra-space-14:3.5rem;--chakra-space-16:4rem;--chakra-space-20:5rem;--chakra-space-24:6rem;--chakra-space-28:7rem;--chakra-space-32:8rem;--chakra-space-36:9rem;--chakra-space-40:10rem;--chakra-space-44:11rem;--chakra-space-48:12rem;--chakra-space-52:13rem;--chakra-space-56:14rem;--chakra-space-60:15rem;--chakra-space-64:16rem;--chakra-space-72:18rem;--chakra-space-80:20rem;--chakra-space-96:24rem;--chakra-space-px:1px;--chakra-space-0-5:0.125rem;--chakra-space-1-5:0.375rem;--chakra-space-2-5:0.625rem;--chakra-space-3-5:0.875rem;--chakra-shadows-xs:0 0 0 1px rgba(0, 0, 0, 0.05);--chakra-shadows-sm:0 1px 2px 0 rgba(0, 0, 0, 0.05);--chakra-shadows-base:0 1px 3px 0 rgba(0, 0, 0, 0.1),0 1px 2px 0 rgba(0, 0, 0, 0.06);--chakra-shadows-md:0 4px 6px -1px rgba(0, 0, 0, 0.1),0 2px 4px -1px rgba(0, 0, 0, 0.06);--chakra-shadows-lg:0 10px 15px -3px rgba(0, 0, 0, 0.1),0 4px 6px -2px rgba(0, 0, 0, 0.05);--chakra-shadows-xl:0 20px 25px -5px rgba(0, 0, 0, 0.1),0 10px 10px -5px rgba(0, 0, 0, 0.04);--chakra-shadows-2xl:0 25px 50px -12px rgba(0, 0, 0, 0.25);--chakra-shadows-outline:0 0 0 3px rgba(66, 153, 225, 0.6);--chakra-shadows-inner:inset 0 2px 4px 0 rgba(0,0,0,0.06);--chakra-shadows-none:none;--chakra-shadows-dark-lg:rgba(0, 0, 0, 0.1) 0px 0px 0px 1px,rgba(0, 0, 0, 0.2) 0px 5px 10px,rgba(0, 0, 0, 0.4) 0px 15px 40px;--chakra-sizes-1:0.25rem;--chakra-sizes-2:0.5rem;--chakra-sizes-3:0.75rem;--chakra-sizes-4:1rem;--chakra-sizes-5:1.25rem;--chakra-sizes-6:1.5rem;--chakra-sizes-7:1.75rem;--chakra-sizes-8:2rem;--chakra-sizes-9:2.25rem;--chakra-sizes-10:2.5rem;--chakra-sizes-12:3rem;--chakra-sizes-14:3.5rem;--chakra-sizes-16:4rem;--chakra-sizes-20:5rem;--chakra-sizes-24:6rem;--chakra-sizes-28:7rem;--chakra-sizes-32:8rem;--chakra-sizes-36:9rem;--chakra-sizes-40:10rem;--chakra-sizes-44:11rem;--chakra-sizes-48:12rem;--chakra-sizes-52:13rem;--chakra-sizes-56:14rem;--chakra-sizes-60:15rem;--chakra-sizes-64:16rem;--chakra-sizes-72:18rem;--chakra-sizes-80:20rem;--chakra-sizes-96:24rem;--chakra-sizes-px:1px;--chakra-sizes-0-5:0.125rem;--chakra-sizes-1-5:0.375rem;--chakra-sizes-2-5:0.625rem;--chakra-sizes-3-5:0.875rem;--chakra-sizes-max:max-content;--chakra-sizes-min:min-content;--chakra-sizes-full:100%;--chakra-sizes-3xs:14rem;--chakra-sizes-2xs:16rem;--chakra-sizes-xs:20rem;--chakra-sizes-sm:24rem;--chakra-sizes-md:28rem;--chakra-sizes-lg:32rem;--chakra-sizes-xl:36rem;--chakra-sizes-2xl:42rem;--chakra-sizes-3xl:48rem;--chakra-sizes-4xl:56rem;--chakra-sizes-5xl:64rem;--chakra-sizes-6xl:72rem;--chakra-sizes-7xl:80rem;--chakra-sizes-8xl:90rem;--chakra-sizes-container-sm:640px;--chakra-sizes-container-md:768px;--chakra-sizes-container-lg:1024px;--chakra-sizes-container-xl:1280px;--chakra-zIndices-hide:-1;--chakra-zIndices-auto:auto;--chakra-zIndices-base:0;--chakra-zIndices-docked:10;--chakra-zIndices-dropdown:1000;--chakra-zIndices-sticky:1100;--chakra-zIndices-banner:1200;--chakra-zIndices-overlay:1300;--chakra-zIndices-modal:1400;--chakra-zIndices-popover:1500;--chakra-zIndices-skipLink:1600;--chakra-zIndices-toast:1700;--chakra-zIndices-tooltip:1800;--chakra-transition-property-common:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform;--chakra-transition-property-colors:background-color,border-color,color,fill,stroke;--chakra-transition-property-dimensions:width,height;--chakra-transition-property-position:left,right,top,bottom;--chakra-transition-property-background:background-color,background-image,background-position;--chakra-transition-easing-ease-in:cubic-bezier(0.4, 0, 1, 1);--chakra-transition-easing-ease-out:cubic-bezier(0, 0, 0.2, 1);--chakra-transition-easing-ease-in-out:cubic-bezier(0.4, 0, 0.2, 1);--chakra-transition-duration-ultra-fast:50ms;--chakra-transition-duration-faster:100ms;--chakra-transition-duration-fast:150ms;--chakra-transition-duration-normal:200ms;--chakra-transition-duration-slow:300ms;--chakra-transition-duration-slower:400ms;--chakra-transition-duration-ultra-slow:500ms;--chakra-blur-none:0;--chakra-blur-sm:4px;--chakra-blur-base:8px;--chakra-blur-md:12px;--chakra-blur-lg:16px;--chakra-blur-xl:24px;--chakra-blur-2xl:40px;--chakra-blur-3xl:64px;}.chakra-ui-light :host:not([data-theme]),.chakra-ui-light :root:not([data-theme]),.chakra-ui-light [data-theme]:not([data-theme]),[data-theme=light] :host:not([data-theme]),[data-theme=light] :root:not([data-theme]),[data-theme=light] [data-theme]:not([data-theme]),:host[data-theme=light],:root[data-theme=light],[data-theme][data-theme=light]{--chakra-colors-chakra-body-text:var(--chakra-colors-gray-800);--chakra-colors-chakra-body-bg:var(--chakra-colors-white);--chakra-colors-chakra-border-color:var(--chakra-colors-gray-200);--chakra-colors-chakra-placeholder-color:var(--chakra-colors-gray-500);}.chakra-ui-dark :host:not([data-theme]),.chakra-ui-dark :root:not([data-theme]),.chakra-ui-dark [data-theme]:not([data-theme]),[data-theme=dark] :host:not([data-theme]),[data-theme=dark] :root:not([data-theme]),[data-theme=dark] [data-theme]:not([data-theme]),:host[data-theme=dark],:root[data-theme=dark],[data-theme][data-theme=dark]{--chakra-colors-chakra-body-text:var(--chakra-colors-whiteAlpha-900);--chakra-colors-chakra-body-bg:var(--chakra-colors-gray-800);--chakra-colors-chakra-border-color:var(--chakra-colors-whiteAlpha-300);--chakra-colors-chakra-placeholder-color:var(--chakra-colors-whiteAlpha-400);}</style><style data-emotion="css-global 1orvvh0">html{line-height:1.5;-webkit-text-size-adjust:100%;font-family:system-ui,sans-serif;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;-moz-osx-font-smoothing:grayscale;touch-action:manipulation;}body{position:relative;min-height:100%;font-feature-settings:'kern';}*,*::before,*::after{border-width:0;border-style:solid;box-sizing:border-box;}main{display:block;}hr{border-top-width:1px;box-sizing:content-box;height:0;overflow:visible;}pre,code,kbd,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:1em;}a{background-color:transparent;color:inherit;-webkit-text-decoration:inherit;text-decoration:inherit;}abbr[title]{border-bottom:none;-webkit-text-decoration:underline;text-decoration:underline;-webkit-text-decoration:underline dotted;-webkit-text-decoration:underline dotted;text-decoration:underline dotted;}b,strong{font-weight:bold;}small{font-size:80%;}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline;}sub{bottom:-0.25em;}sup{top:-0.5em;}img{border-style:none;}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0;}button,input{overflow:visible;}button,select{text-transform:none;}button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner{border-style:none;padding:0;}fieldset{padding:0.35em 0.75em 0.625em;}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal;}progress{vertical-align:baseline;}textarea{overflow:auto;}[type="checkbox"],[type="radio"]{box-sizing:border-box;padding:0;}[type="number"]::-webkit-inner-spin-button,[type="number"]::-webkit-outer-spin-button{-webkit-appearance:none!important;}input[type="number"]{-moz-appearance:textfield;}[type="search"]{-webkit-appearance:textfield;outline-offset:-2px;}[type="search"]::-webkit-search-decoration{-webkit-appearance:none!important;}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit;}details{display:block;}summary{display:-webkit-box;display:-webkit-list-item;display:-ms-list-itembox;display:list-item;}template{display:none;}[hidden]{display:none!important;}body,blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0;}button{background:transparent;padding:0;}fieldset{margin:0;padding:0;}ol,ul{margin:0;padding:0;}textarea{resize:vertical;}button,[role="button"]{cursor:pointer;}button::-moz-focus-inner{border:0!important;}table{border-collapse:collapse;}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit;}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit;}img,svg,video,canvas,audio,iframe,embed,object{display:block;}img,video{max-width:100%;height:auto;}[data-js-focus-visible] :focus:not([data-focus-visible-added]):not([data-focus-visible-disabled]){outline:none;box-shadow:none;}select::-ms-expand{display:none;}</style><style data-emotion="css-global 3rsuo3">body{font-family:var(--chakra-fonts-body);color:var(--chakra-colors-chakra-body-text);background:var(--chakra-colors-chakra-body-bg);transition-property:background-color;transition-duration:var(--chakra-transition-duration-normal);line-height:var(--chakra-lineHeights-base);}*::-webkit-input-placeholder{color:var(--chakra-colors-chakra-placeholder-color);}*::-moz-placeholder{color:var(--chakra-colors-chakra-placeholder-color);}*:-ms-input-placeholder{color:var(--chakra-colors-chakra-placeholder-color);}*::placeholder{color:var(--chakra-colors-chakra-placeholder-color);}*,*::before,::after{border-color:var(--chakra-colors-chakra-border-color);word-wrap:break-word;}h1{font-size:var(--chakra-fontSizes-3xl);font-weight:var(--chakra-fontWeights-bold);}h2{font-size:var(--chakra-fontSizes-2xl);font-weight:var(--chakra-fontWeights-bold);}h3{font-size:var(--chakra-fontSizes-lg);}h4{font-size:var(--chakra-fontSizes-md);}</style><style>
      #nprogress {
        pointer-events: none;
      }
      #nprogress .bar {
        background: #29D;
        position: fixed;
        z-index: 9999;
        top: 0;
        left: 0;
        width: 100%;
        height: 3px;
      }
      #nprogress .peg {
        display: block;
        position: absolute;
        right: 0px;
        width: 100px;
        height: 100%;
        box-shadow: 0 0 10px #29D, 0 0 5px #29D;
        opacity: 1;
        -webkit-transform: rotate(3deg) translate(0px, -4px);
        -ms-transform: rotate(3deg) translate(0px, -4px);
        transform: rotate(3deg) translate(0px, -4px);
      }
      #nprogress .spinner {
        display: block;
        position: fixed;
        z-index: 1031;
        top: 15px;
        right: 15px;
      }
      #nprogress .spinner-icon {
        width: 18px;
        height: 18px;
        box-sizing: border-box;
        border: solid 2px transparent;
        border-top-color: #29D;
        border-left-color: #29D;
        border-radius: 50%;
        -webkit-animation: nprogresss-spinner 400ms linear infinite;
        animation: nprogress-spinner 400ms linear infinite;
      }
      .nprogress-custom-parent {
        overflow: hidden;
        position: relative;
      }
      .nprogress-custom-parent #nprogress .spinner,
      .nprogress-custom-parent #nprogress .bar {
        position: absolute;
      }
      @-webkit-keyframes nprogress-spinner {
        0% {
          -webkit-transform: rotate(0deg);
        }
        100% {
          -webkit-transform: rotate(360deg);
        }
      }
      @keyframes nprogress-spinner {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }
    </style><style data-emotion="css f1ildm">.css-f1ildm{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:end;-ms-flex-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;width:100%;position:relative;margin-top:var(--chakra-space-5);margin-bottom:var(--chakra-space-5);}@media screen and (min-width: 62em){.css-f1ildm{-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;margin-top:auto;margin-bottom:auto;}}</style><div class="css-f1ildm"><style data-emotion="css b1ilzc">.css-b1ilzc{display:none;}@media screen and (min-width: 62em){.css-b1ilzc{display:block;}}</style><div class="css-b1ilzc"><style data-emotion="css 4tl3t5">.css-4tl3t5{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;white-space:nowrap;vertical-align:middle;outline:2px solid transparent;outline-offset:2px;line-height:1.2;border-radius:var(--chakra-radii-none);font-weight:var(--chakra-fontWeights-medium);transition-property:var(--chakra-transition-property-common);transition-duration:var(--chakra-transition-duration-normal);height:var(--chakra-sizes-12);min-width:var(--chakra-sizes-12);font-size:var(--chakra-fontSizes-xl);-webkit-padding-start:var(--chakra-space-6);padding-inline-start:var(--chakra-space-6);-webkit-padding-end:var(--chakra-space-6);padding-inline-end:var(--chakra-space-6);background:var(--chakra-colors-transparent);width:var(--chakra-sizes-full);padding-top:var(--chakra-space-5);padding-bottom:var(--chakra-space-5);}.css-4tl3t5:focus-visible,.css-4tl3t5[data-focus-visible]{box-shadow:var(--chakra-shadows-outline);}.css-4tl3t5[disabled],.css-4tl3t5[aria-disabled=true],.css-4tl3t5[data-disabled]{opacity:0.4;cursor:not-allowed;box-shadow:var(--chakra-shadows-none);}.css-4tl3t5:hover,.css-4tl3t5[data-hover]{background-color:var(--chakra-colors-black);color:var(--chakra-colors-white);}.css-4tl3t5:active,.css-4tl3t5[data-active]{background:var(--chakra-colors-gray-300);}@media screen and (min-width: 62em){.css-4tl3t5{width:auto;padding-top:var(--chakra-space-10);padding-bottom:var(--chakra-space-10);}}</style><button type="button" class="chakra-button css-4tl3t5">Home</button><button type="button" class="chakra-button css-4tl3t5">About</button><button type="button" class="chakra-button css-4tl3t5">Projects</button><button type="button" class="chakra-button css-4tl3t5">Blogs</button></div><style data-emotion="css 1fxoh6j">.css-1fxoh6j{display:inline;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:static;white-space:nowrap;vertical-align:middle;outline:2px solid transparent;outline-offset:2px;line-height:inherit;border-radius:var(--chakra-radii-md);font-weight:var(--chakra-fontWeights-semibold);transition-property:var(--chakra-transition-property-common);transition-duration:var(--chakra-transition-duration-normal);height:var(--chakra-sizes-12);min-width:var(--chakra-sizes-12);font-size:var(--chakra-fontSizes-lg);-webkit-padding-start:var(--chakra-space-6);padding-inline-start:var(--chakra-space-6);-webkit-padding-end:var(--chakra-space-6);padding-inline-end:var(--chakra-space-6);background:none;color:inherit;margin:0px;padding:0px;right:0px;}@media screen and (min-width: 62em){.css-1fxoh6j{position:absolute;}}.css-1fxoh6j:focus-visible,.css-1fxoh6j[data-focus-visible]{box-shadow:var(--chakra-shadows-outline);}.css-1fxoh6j[disabled],.css-1fxoh6j[aria-disabled=true],.css-1fxoh6j[data-disabled]{opacity:0.4;cursor:not-allowed;box-shadow:var(--chakra-shadows-none);}.css-1fxoh6j:hover[disabled],.css-1fxoh6j[data-hover][disabled],.css-1fxoh6j:hover[aria-disabled=true],.css-1fxoh6j[data-hover][aria-disabled=true],.css-1fxoh6j:hover[data-disabled],.css-1fxoh6j[data-hover][data-disabled]{background:initial;}</style><button type="button" class="chakra-button css-1fxoh6j" aria-label="Toggle Dark Mode"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" aria-hidden="true" focusable="false" height="1.5rem" width="1.5rem" xmlns="http://www.w3.org/2000/svg"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path></svg></button><style data-emotion="css 1g36a2a">.css-1g36a2a{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;white-space:nowrap;vertical-align:middle;outline:2px solid transparent;outline-offset:2px;line-height:inherit;border-radius:var(--chakra-radii-md);font-weight:var(--chakra-fontWeights-semibold);transition-property:var(--chakra-transition-property-common);transition-duration:var(--chakra-transition-duration-normal);height:var(--chakra-sizes-12);min-width:var(--chakra-sizes-12);font-size:var(--chakra-fontSizes-lg);-webkit-padding-start:var(--chakra-space-6);padding-inline-start:var(--chakra-space-6);-webkit-padding-end:var(--chakra-space-6);padding-inline-end:var(--chakra-space-6);background:none;color:inherit;margin:0px;padding:0px;}@media screen and (min-width: 62em){.css-1g36a2a{display:none;}}.css-1g36a2a:focus-visible,.css-1g36a2a[data-focus-visible]{box-shadow:var(--chakra-shadows-outline);}.css-1g36a2a[disabled],.css-1g36a2a[aria-disabled=true],.css-1g36a2a[data-disabled]{opacity:0.4;cursor:not-allowed;box-shadow:var(--chakra-shadows-none);}.css-1g36a2a:hover[disabled],.css-1g36a2a[data-hover][disabled],.css-1g36a2a:hover[aria-disabled=true],.css-1g36a2a[data-hover][aria-disabled=true],.css-1g36a2a:hover[data-disabled],.css-1g36a2a[data-hover][data-disabled]{background:initial;}</style><button type="button" class="chakra-button css-1g36a2a" aria-label="Menu"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" aria-hidden="true" focusable="false" height="2rem" width="2rem" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0z"></path><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg></button></div><style data-emotion="css 2pyzmp">.css-2pyzmp{width:90%;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;max-width:var(--chakra-sizes-container-lg);-webkit-padding-start:1rem;padding-inline-start:1rem;-webkit-padding-end:1rem;padding-inline-end:1rem;padding-top:var(--chakra-space-10);padding-bottom:var(--chakra-space-10);}@media screen and (min-width: 62em){.css-2pyzmp{width:auto;}}</style><div class="chakra-container css-2pyzmp"><article class="mb-32"><style data-emotion="css hqnxrd">.css-hqnxrd{font-family:var(--chakra-fonts-heading);font-weight:var(--chakra-fontWeights-bold);margin-top:var(--chakra-space-5);margin-bottom:var(--chakra-space-5);}@media screen and (min-width: 0em) and (max-width: 61.9375em){.css-hqnxrd{font-size:var(--chakra-fontSizes-3xl);line-height:1.33;}@media screen and (min-width: 48em){.css-hqnxrd{font-size:var(--chakra-fontSizes-4xl);line-height:1.2;}}}@media screen and (min-width: 62em){.css-hqnxrd{font-size:var(--chakra-fontSizes-3xl);line-height:1.33;}@media screen and (min-width: 48em){.css-hqnxrd{font-size:var(--chakra-fontSizes-4xl);line-height:1.2;}}}</style><h2 class="chakra-heading css-hqnxrd">Intermediate React, v4 - Notes</h2><style data-emotion="css 1dxxm06">.css-1dxxm06{margin-top:var(--chakra-space-1);margin-bottom:var(--chakra-space-2);font-size:var(--chakra-fontSizes-lg);}@media screen and (min-width: 62em){.css-1dxxm06{font-size:var(--chakra-fontSizes-xl);}}</style><p class="chakra-text css-1dxxm06">This is the note I take as I watch this course
<style data-emotion="css spn4bz">.css-spn4bz{transition-property:var(--chakra-transition-property-common);transition-duration:var(--chakra-transition-duration-fast);transition-timing-function:var(--chakra-transition-easing-ease-out);cursor:pointer;-webkit-text-decoration:none;text-decoration:none;outline:2px solid transparent;outline-offset:2px;color:inherit;}.css-spn4bz:hover,.css-spn4bz[data-hover]{-webkit-text-decoration:underline;text-decoration:underline;}.css-spn4bz:focus-visible,.css-spn4bz[data-focus-visible]{box-shadow:var(--chakra-shadows-outline);}</style><a class="chakra-link css-spn4bz" href="https://frontendmasters.com/courses/intermediate-react-v4/" node="[object Object]">Intermediate React, v4 | FrontendMasters</a></p>
<style data-emotion="css 2vxd19">.css-2vxd19{font-family:var(--chakra-fonts-heading);font-weight:var(--chakra-fontWeights-bold);margin-top:var(--chakra-space-10);margin-bottom:var(--chakra-space-5);}@media screen and (min-width: 0em) and (max-width: 61.9375em){.css-2vxd19{font-size:var(--chakra-fontSizes-3xl);line-height:1.33;}@media screen and (min-width: 48em){.css-2vxd19{font-size:var(--chakra-fontSizes-4xl);line-height:1.2;}}}@media screen and (min-width: 62em){.css-2vxd19{font-size:var(--chakra-fontSizes-3xl);line-height:1.33;}@media screen and (min-width: 48em){.css-2vxd19{font-size:var(--chakra-fontSizes-4xl);line-height:1.2;}}}</style><h3 class="chakra-heading css-2vxd19">Hooks in Depth</h3>
<style data-emotion="css ys5fw5">.css-ys5fw5{font-family:var(--chakra-fonts-heading);font-weight:var(--chakra-fontWeights-bold);margin-top:var(--chakra-space-4);margin-bottom:var(--chakra-space-4);font-size:var(--chakra-fontSizes-2xl);line-height:1.33;}@media screen and (min-width: 48em){.css-ys5fw5{font-size:var(--chakra-fontSizes-3xl);line-height:1.2;}}</style><h3 class="chakra-heading css-ys5fw5"><style data-emotion="css 19xdaj1">.css-19xdaj1{display:inline-block;font-family:var(--chakra-fonts-mono);font-size:auto;-webkit-padding-start:0.2em;padding-inline-start:0.2em;-webkit-padding-end:0.2em;padding-inline-end:0.2em;border-radius:var(--chakra-radii-sm);}</style><code class="chakra-code css-19xdaj1">useState</code></h3>
<p class="chakra-text css-1dxxm06">Lets you manage state of React component.</p>
<h3 class="chakra-heading css-ys5fw5"><code class="chakra-code css-19xdaj1">useEffect</code></h3>
<p class="chakra-text css-1dxxm06">Lets you call side effect for component outside of normal render cycle. Second argument is used to determine dependencies.</p>
<h3 class="chakra-heading css-ys5fw5"><code class="chakra-code css-19xdaj1">useContext</code></h3>
<p class="chakra-text css-1dxxm06">If not using useContext, we have to pass context to component several levels lower way down (prop drilling). We can access/update context from child level. Using useContext solve this problem like a global variable, but it don&#x27;t show the explicit relationship between components.</p>
<h3 class="chakra-heading css-ys5fw5"><code class="chakra-code css-19xdaj1">useRef</code></h3>
<p class="chakra-text css-1dxxm06">useRef difference from useState is that it&#x27;s a reference to the DOM element. useState will be changed when component re-renders, but useRef will be changed when component unmounts.</p>
<h3 class="chakra-heading css-ys5fw5"><code class="chakra-code css-19xdaj1">useReducer</code></h3>
<p class="chakra-text css-1dxxm06">Basically useState with extra steps to manage state using dispatch, break it and make it testable. Using the reducer with the same state and action will always return the same new state.</p>
<h3 class="chakra-heading css-ys5fw5"><code class="chakra-code css-19xdaj1">useMemo</code></h3>
<p class="chakra-text css-1dxxm06">useMemo is a function that memoizes a function or value. It&#x27;s useful when you want to memoize a function that is expensive to compute or when you want to memoize a value that you expect to be constant (no need to recalculate).</p>
<h3 class="chakra-heading css-ys5fw5"><code class="chakra-code css-19xdaj1">useCallback</code></h3>
<p class="chakra-text css-1dxxm06">Same as useMemo, useCallback is used for performance optimization. It&#x27;s a function that memoizes a function and only recalculates if the dependencies change.</p>
<h3 class="chakra-heading css-ys5fw5"><code class="chakra-code css-19xdaj1">useLayoutEffect</code></h3>
<p class="chakra-text css-1dxxm06">Same as useEffect, but it&#x27;s called after the component has been mounted. It&#x27;s synchronous to render. This is helpful because useLayout runs the same time as <code class="chakra-code css-19xdaj1">componentDidMount</code> and <code class="chakra-code css-19xdaj1">componentDidUpdaete</code> in class component, where <code class="chakra-code css-19xdaj1">useEffect</code> is scheduled after. Use <code class="chakra-code css-19xdaj1">useLayoutEffect</code> if it is guaranteed that the effect will run synchronously after the component has been mounted.</p>
<h3 class="chakra-heading css-ys5fw5"><code class="chakra-code css-19xdaj1">useImperativeHandle</code></h3>
<p class="chakra-text css-1dxxm06">useImperativeHandle is a function that lets you customize methods of object that is returned from useRef hook.  It&#x27;s useful when you want to pass a ref to a component that is not a child of the component you are using it in, expecially on creating libraries.</p>
<h3 class="chakra-heading css-ys5fw5"><code class="chakra-code css-19xdaj1">useDebugValue</code> &amp; <code class="chakra-code css-19xdaj1">useId</code></h3>
<p class="chakra-text css-1dxxm06">useDebugValue can be used to expose custom value while debugging custom hooks in DevTools. useId is a function that generate a unique ID.</p>
<h3 class="chakra-heading css-2vxd19">TailwindCSS</h3>
<h3 class="chakra-heading css-ys5fw5">CSS &amp; React</h3>
<p class="chakra-text css-1dxxm06">Tailwind is not tied to React. It&#x27;s a CSS framework.</p>
<p class="chakra-text css-1dxxm06">Install:</p>
<pre class="css-0"><style data-emotion="css 1dyqtvx">.css-1dyqtvx{display:block;font-family:var(--chakra-fonts-mono);font-size:var(--chakra-fontSizes-md);-webkit-padding-start:0.2em;padding-inline-start:0.2em;-webkit-padding-end:0.2em;padding-inline-end:0.2em;border-radius:var(--chakra-radii-sm);background:var(--chakra-colors-gray-100);color:var(--chakra-colors-gray-800);white-space:pre;margin-top:var(--chakra-space-3);margin-bottom:var(--chakra-space-3);padding:var(--chakra-space-5);overflow-x:scroll;tab-size:2;}.css-1dyqtvx::-webkit-scrollbar{display:none;}</style><code class="chakra-code css-1dyqtvx">npm i -D tailwindcss@3.0.22 postcss@8.4.6 autoprefixer@10.4.2
</code></pre>
<p class="chakra-text css-1dxxm06">Init Tailwind project:</p>
<pre class="css-0"><code class="chakra-code css-1dyqtvx">npx tailwindcss init
</code></pre>
<p class="chakra-text css-1dxxm06">This will create a tailwind config in <code class="chakra-code css-19xdaj1">tailwind.config.js</code>.</p>
<p class="chakra-text css-1dxxm06">Then add these line in the beginning of the global CSS file</p>
<pre class="css-0"><code class="chakra-code css-1dyqtvx">@tailwind base;
@tailwind components;
@tailwind utilities;
</code></pre>
<p class="chakra-text css-1dxxm06">Then create <code class="chakra-code css-19xdaj1">.postcssrc</code> in root directory</p>
<pre class="css-0"><code class="chakra-code css-1dyqtvx">{
  &quot;plugins&quot;: {
    &quot;autoprefixer&quot;: {},
    &quot;tailwindcss&quot;: {}
  }
}
</code></pre>
<h3 class="chakra-heading css-ys5fw5">Basics &amp; Gradients</h3>
<p class="chakra-text css-1dxxm06">Basically, working with Tailwind CSS require us to implement CSS rules via adding <code class="chakra-code css-19xdaj1">className</code> to our component so component will have a long className string from Tailwind. But sometimes we will have to add some custom style e.g. background image because Tailwind doesn&#x27;t support it.</p>
<pre class="css-0"><code class="chakra-code css-1dyqtvx">&lt;div
	className=&quot;p-0 m-0&quot;
	style={{
		background: &quot;url(http://pets-images.dev-apis.com/pets/wallpaperA.jpg)&quot;,
	}}
&gt;
  	...
&lt;/div&gt;
</code></pre>
<p class="chakra-text css-1dxxm06">More Tailwind CSS class can be found at the docs.</p>
<h3 class="chakra-heading css-ys5fw5">CSS Libraries</h3>
<p class="chakra-text css-1dxxm06">Using Tailwind will make our CSS size much smaller. There are several other tools to do styling, including emotion and styled-components. They are good if we need to have some javascript functionality in our CSS like computing colors, etc.</p>
<h3 class="chakra-heading css-ys5fw5">Layout Basics</h3>
<p class="chakra-text css-1dxxm06">We can also use Tailwind to layout our components using flex.</p>
<h3 class="chakra-heading css-ys5fw5">Tailwind Plugins</h3>
<p class="chakra-text css-1dxxm06">There are several component styling by Tailwind CSS. Install it with</p>
<pre class="css-0"><code class="chakra-code css-1dyqtvx">npm install -D @tailwindcss/forms@0.4.0.
</code></pre>
<p class="chakra-text css-1dxxm06">This will apply some default styling to basic form elements. In text input, add <code class="chakra-code css-19xdaj1">type=text</code> so it will be styled as a text input.</p>
<h3 class="chakra-heading css-ys5fw5">Grid &amp; Breakpoints</h3>
<p class="chakra-text css-1dxxm06">We can also use Tailwind to layout our components using grid and it&#x27;s much easier than using pure CSS. We can also make it responsive.</p>
<h3 class="chakra-heading css-ys5fw5">Positioning</h3>
<p class="chakra-text css-1dxxm06">We can also have relative positioning in CSS.</p>
<h3 class="chakra-heading css-2vxd19">Code Splitting &amp; Server Side Rendering</h3>
<h3 class="chakra-heading css-ys5fw5">Code Splitting</h3>
<p class="chakra-text css-1dxxm06">Code splitting is a technique to split our application into smaller parts so the application won&#x27;t be loaded all at once. This is useful when we have a big application and we want to load it faster. To implement this, we can use <code class="chakra-code css-19xdaj1">Suspense</code> and <code class="chakra-code css-19xdaj1">React.lazy</code> in router.</p>
<pre class="css-0"><code class="chakra-code css-1dyqtvx">import { useState, StrictMode, lazy, Suspense } from &quot;react&quot;;

const Details = lazy(() =&gt; import(&quot;./Details&quot;));
const SearchParams = lazy(() =&gt; import(&quot;./SearchParams&quot;));

const App = () =&gt; {
	return (
		&lt;Suspense fallback={&lt;h1&gt;loading route...&lt;/h1&gt;}&gt;
			&lt;BrowserRouter&gt;
				...
			&lt;/BrowserRouter&gt;
		&lt;/Suspense&gt;
	);
}
</code></pre>
<p class="chakra-text css-1dxxm06">Other than this, the code can be load asynchronously with <code class="chakra-code css-19xdaj1">lazy</code>.</p>
<pre class="css-0"><code class="chakra-code css-1dyqtvx">import { ..., lazy } from &quot;react&quot;;

const Modal = lazy(() =&gt; import(&quot;./Modal&quot;));
</code></pre>
<h3 class="chakra-heading css-ys5fw5">Server Side Rendering</h3>
<p class="chakra-text css-1dxxm06">Performance is a big concern when we have a big application. There are several ways to improve performance. One challenge is to load the correct content first so user can see the site faster.</p>
<p class="chakra-text css-1dxxm06">Server side rendering is a technique to run React on the server before send it to the user and send the first rendering of the application. The user will only has to download the HTML and see the page, otherwise the user has to download HTML, JS, and load it before showing anything. The total time is relative slower because the React app is loading in the background, but the time the user see something on the page is much faster.</p>
<p class="chakra-text css-1dxxm06">To implement SSR, we have o change where our app is rendered. We use <code class="chakra-code css-19xdaj1">hydrate</code> from <code class="chakra-code css-19xdaj1">react-dom</code> instead of <code class="chakra-code css-19xdaj1">render</code>, and then achieve it using Express and Node.</p>
<h3 class="chakra-heading css-ys5fw5">Streaming Markup</h3>
<p class="chakra-text css-1dxxm06">We can use <style data-emotion="css 1hlgyny">.css-1hlgyny{margin-top:var(--chakra-space-1);margin-bottom:var(--chakra-space-1);font-size:var(--chakra-fontSizes-lg);}@media screen and (min-width: 62em){.css-1hlgyny{font-size:var(--chakra-fontSizes-xl);}}</style><em class="chakra-text css-1hlgyny">streaming</em> when making HTTP request so we can send response in chunks (partially rendered) instead of sending the whole big payload at the end. Browser can immediately start downloading CSS while the app is loading. To implement this, we can use <code class="chakra-code css-19xdaj1">renderToNodeStream</code> from <code class="chakra-code css-19xdaj1">react-dom/server</code>.</p>
<h3 class="chakra-heading css-2vxd19">TypeScript</h3>
<p class="chakra-text css-1dxxm06">Typescript make you write javascript code in a more strict way. It&#x27;s a good way to make sure your team don&#x27;t make mistakes as the project scales up. TypeScript make the code more readable and maintainable.</p>
<h3 class="chakra-heading css-ys5fw5">Setup &amp; Refactoring</h3>
<p class="chakra-text css-1dxxm06">Install</p>
<pre class="css-0"><code class="chakra-code css-1dyqtvx">npm install -D typescript@4.5.5
</code></pre>
<p class="chakra-text css-1dxxm06">Then run</p>
<pre class="css-0"><code class="chakra-code css-1dyqtvx">npx tsc --init
</code></pre>
<p class="chakra-text css-1dxxm06">It will generate <code class="chakra-code css-19xdaj1">tsconfig.json</code> file. Some React dependency types are required to be installed.</p>
<pre class="css-0"><code class="chakra-code css-1dyqtvx">npm install -D @types/react@17.0.39 @types/react-dom@17.0.11
</code></pre>
<h3 class="chakra-heading css-ys5fw5">TypeScript &amp; ESLint</h3>
<p class="chakra-text css-1dxxm06">There is a project called <code class="chakra-code css-19xdaj1">typescript-eslint</code> to replace TSLint (deprecated) that can be used to lint TypeScript code using ESLint.</p>
<pre class="css-0"><code class="chakra-code css-1dyqtvx">npm install -D eslint-import-resolver-typescript@2.5.0 @typescript-eslint/eslint-plugin@5.13.0 @typescript-eslint/parser@5.13.0
</code></pre>
<p class="chakra-text css-1dxxm06">Change <code class="chakra-code css-19xdaj1">package.json</code> &quot;lint&quot; entry to</p>
<pre class="css-0"><code class="chakra-code css-1dyqtvx">&quot;scrips&quot;: {
	...
	&quot;lint&quot;: &quot;eslint \&quot;src/**/*.{js,jsx,ts,tsx}\&quot; --quiet&quot;,
	...
}
</code></pre>
<p class="chakra-text css-1dxxm06">Modify <code class="chakra-code css-19xdaj1">.eslintrc.json</code></p>
<pre class="css-0"><code class="chakra-code css-1dyqtvx">{
	&quot;extends&quot;: [
		...,
		&quot;plugin:@typescript-eslint/recommended&quot;,
		&quot;plugin:@typescript-eslint/recommended-requiring-type-checking&quot;,
		&quot;prettier&quot;
	],
	&quot;rules&quot;: {
		...,
		&quot;@typescript-eslint/no-empty-function&quot;: 0
	},
	&quot;plugins&quot;: [..., &quot;@typescript-eslint&quot;],
	&quot;parserOptions&quot;: {
		...,
		&quot;project&quot;: [&quot;./tsconfig.json&quot;],
		...
	}
	...,
	&quot;settings&quot;: {
		...,
		&quot;import/parsers&quot;: {
			&quot;@typescript-eslint/parser&quot;: [&quot;.ts&quot;, &quot;.tsx&quot;]
		},
		&quot;import/resolver&quot;: {
			&quot;typescript&quot;: {
				&quot;alwaysTryTypes&quot;: true
			}
		}
	}
}
</code></pre>
<h3 class="chakra-heading css-ys5fw5">TypeScript Basic Notes</h3>
<style data-emotion="css 13a5a39">.css-13a5a39{list-style-type:decimal;-webkit-margin-start:1em;margin-inline-start:1em;padding-left:var(--chakra-space-4);}.css-13a5a39>*:not(style)~*:not(style){margin-top:var(--chakra-space-2);}</style><ol role="list" class="css-13a5a39"><style data-emotion="css cvpopp">.css-cvpopp{list-style-type:inherit;}</style><li class="css-cvpopp">
<p class="chakra-text css-1dxxm06">We can have a strict ordering of string and function which will be enforced to make other file easier to type.</p>
</li><li class="css-cvpopp">
<p class="chakra-text css-1dxxm06"><code class="chakra-code css-19xdaj1">interface</code> is a way to define a object-like type that can be used in other file. Use interfaces unless you need type aliases.</p>
<pre class="css-0"><code class="chakra-code css-1dyqtvx">// by export it, we can use it in other file
export interface Pet {
	id: number;
	name: string;
	...
}

export interface PetAPIResponse {
	numberOfResults: number;
	...
}
</code></pre>
</li><li class="css-cvpopp">
<p class="chakra-text css-1dxxm06">We can make a custom, more-strict type alias that just allows a few different values by declare it with <code class="chakra-code css-19xdaj1">type</code>.</p>
<pre class="css-0"><code class="chakra-code css-1dyqtvx">export type Animal = &quot;dog&quot; | &quot;cat&quot;;
</code></pre>
</li><li class="css-cvpopp">
<p class="chakra-text css-1dxxm06">The type of a value can be enforced with <code class="chakra-code css-19xdaj1">... as ...</code> syntax.</p>
</li><li class="css-cvpopp">
<p class="chakra-text css-1dxxm06">If the param can be undefined, we can use <code class="chakra-code css-19xdaj1">?</code> to make it optional.</p>
</li></ol>
<p class="chakra-text css-1dxxm06">Add type check to <code class="chakra-code css-19xdaj1">package.json</code></p>
<pre class="css-0"><code class="chakra-code css-1dyqtvx">&quot;scripts&quot;: {
	...,
	&quot;typecheck&quot;: &quot;tsc --noEmit&quot;,
	...
}
</code></pre>
<h3 class="chakra-heading css-2vxd19">Redux</h3>
<p class="chakra-text css-1dxxm06">Redux is a library that does state management. Back then, Redux was made to replace Context that used to be worse in React. One feature of Redux is that it is testable.</p>
<p class="chakra-text css-1dxxm06">Install Redux</p>
<pre class="css-0"><code class="chakra-code css-1dyqtvx">npm install redux@4.1.2 react-redux@7.2.6
</code></pre>
<p class="chakra-text css-1dxxm06">Including Redux middleware</p>
<pre class="css-0"><code class="chakra-code css-1dyqtvx">import { createStore } from &quot;redux&quot;;
import reducer from &quot;./reducers&quot;;

const store = createStore(
	reducer,
	typeof window === &quot;object&quot; &amp;&amp;
		typeof window.__REDUX_DEVTOOLS_EXTENSION__ !== &quot;undefined&quot;
		? window.__REDUX_DEVTOOLS_EXTENSION__()
		: (f) =&gt; f
);

export default store;
</code></pre>
<h3 class="chakra-heading css-ys5fw5">Reducers</h3>
<p class="chakra-text css-1dxxm06">combineReducers is a function that takes an object of reducers and returns a reducer function.</p>
<pre class="css-0"><code class="chakra-code css-1dyqtvx">import { combineReducers } from &quot;redux&quot;;
import location from &quot;./location&quot;;

export default combineReducers({
  location,
  ...
});
</code></pre>
<p class="chakra-text css-1dxxm06">Reducer takes an old state, an action, and combines those things to make a state. A reducer must have a default state. Reducer are synchronous.</p>
<pre class="css-0"><code class="chakra-code css-1dyqtvx">export default function location(state = &quot;Seattle, WA&quot;, action) {
  switch (action.type) {
    case &quot;CHANGE_LOCATION&quot;:
      return action.payload;
    default:
      return state;
  }
}
</code></pre>
<h3 class="chakra-heading css-ys5fw5">Action Creators</h3>
<p class="chakra-text css-1dxxm06">Action Creators are functions that return action objects.</p>
<pre class="css-0"><code class="chakra-code css-1dyqtvx">export default function changeTheme(theme) {
  return { type: &quot;CHANGE_THEME&quot;, payload: theme };
}
</code></pre>
<h3 class="chakra-heading css-ys5fw5">Providers &amp; Dispatching Actions</h3>
<p class="chakra-text css-1dxxm06">Provider is a component that wraps the app and provides the store to the app.</p>
<pre class="css-0"><code class="chakra-code css-1dyqtvx">import { Provider } from &quot;react-redux&quot;;
import store from &quot;./store&quot;;

const App = () =&gt; {
	return (
		&lt;Provider store={store}&gt;
			&lt;App /&gt;
		&lt;/Provider&gt;
	);
}
</code></pre>
<p class="chakra-text css-1dxxm06">Now we can use Redux in component.</p>
<pre class="css-0"><code class="chakra-code css-1dyqtvx">import { useSelector, useDispatch } from &quot;react-redux&quot;;
import changeLocation from &quot;./actionCreators/changeLocation&quot;;
...

const location = useSelector((state) =&gt; state.location);
...
const dispatch = useDispatch();

const SearchParams = () =&gt; {
	return (
		...
		&lt;input
			id=&quot;location&quot;
			value={location}
			placeholder=&quot;Location&quot;
			onChange={(e) =&gt; dispatch(changeLocation(e.target.value))}
		/&gt;
		...
	)
}
</code></pre>
<h3 class="chakra-heading css-ys5fw5">Redux Dev Tools</h3>
<p class="chakra-text css-1dxxm06">Redux Dev Tools is a browser extension that allows us to see the state of the store.</p>
<h3 class="chakra-heading css-2vxd19">Testing</h3>
<p class="chakra-text css-1dxxm06">Jest is a testing library that allows us to write tests in JavaScript. It is built on top of Jasmine.</p>
<p class="chakra-text css-1dxxm06">Install Jest</p>
<pre class="css-0"><code class="chakra-code css-1dyqtvx">npm install -D jest@27.5.1 @testing-library/react@12.1.3
</code></pre>
<p class="chakra-text css-1dxxm06">Replace <code class="chakra-code css-19xdaj1">.babelrc</code> with</p>
<pre class="css-0"><code class="chakra-code css-1dyqtvx">{
  &quot;presets&quot;: [
    [
      &quot;@babel/preset-react&quot;,
      {
        &quot;runtime&quot;: &quot;automatic&quot;
      }
    ],
    &quot;@babel/preset-env&quot;
  ],
  &quot;plugins&quot;: [&quot;@babel/plugin-proposal-class-properties&quot;],
  &quot;env&quot;: {
    &quot;test&quot;: {
      &quot;presets&quot;: [
        [
          &quot;@babel/preset-env&quot;,
          {
            &quot;targets&quot;: {
              &quot;node&quot;: &quot;current&quot;
            }
          }
        ]
      ]
    }
  }
}
</code></pre>
<p class="chakra-text css-1dxxm06">Add <code class="chakra-code css-19xdaj1">test</code> script to <code class="chakra-code css-19xdaj1">package.json</code></p>
<pre class="css-0"><code class="chakra-code css-1dyqtvx">&quot;scripts&quot;: {
	...,
	&quot;test&quot;: &quot;jest&quot;,
	&quot;test:watch&quot;: &quot;jest --watch&quot;
	...
}
</code></pre>
<h3 class="chakra-heading css-ys5fw5">Basic React Testing</h3>
<style data-emotion="css 19qh3zo">.css-19qh3zo{list-style-type:disc;-webkit-margin-start:1em;margin-inline-start:1em;padding-left:var(--chakra-space-4);}.css-19qh3zo>*:not(style)~*:not(style){margin-top:var(--chakra-space-2);}</style><ul role="list" class="css-19qh3zo"><li class="css-cvpopp">Try to test functionality, not implementation</li><li class="css-cvpopp">Don&#x27;t test UI or something that likely to change, test the action to the UI instead</li><li class="css-cvpopp">Test the important part to the user</li><li class="css-cvpopp">Delete test on a regular basis</li><li class="css-cvpopp">Fix/delete bad test</li></ul>
<p class="chakra-text css-1dxxm06">Basic test file has extension <code class="chakra-code css-19xdaj1">.test.js</code> or <code class="chakra-code css-19xdaj1">.spec.js</code></p>
<pre class="css-0"><code class="chakra-code css-1dyqtvx">import { expect, test } from &quot;@jest/globals&quot;;
import { render } from &quot;@testing-library/react&quot;;
import Pet from &quot;../Pet.js&quot;; // the component

test(&quot;displays a default thumbnail&quot;, async () =&gt; { // test case
  const pet = render(&lt;Pet /&gt;);

  const petThumbnail = await pet.findByTestId(&quot;thumbnail&quot;);
  expect(petThumbnail.src).toContain(&quot;none.jpg&quot;);
});
</code></pre>
<p class="chakra-text css-1dxxm06"><code class="chakra-code css-19xdaj1">findByTestId</code> is a function that finds a component by its test id. To catch a specific component for testing, we can add a <code class="chakra-code css-19xdaj1">data-testid</code> attribute to the component.</p>
<p class="chakra-text css-1dxxm06">For testing custom hooks, we can make a fake component, or using <code class="chakra-code css-19xdaj1">@testing-library/react-hooks</code>, then we can use <code class="chakra-code css-19xdaj1">renderHook</code> to render a component.</p>
<h3 class="chakra-heading css-ys5fw5">Mocks</h3>
<p class="chakra-text css-1dxxm06">To test a component that uses a library that is not available in the browser, we can mock the library. A mock is a fake implementation.</p>
<p class="chakra-text css-1dxxm06">Install</p>
<pre class="css-0"><code class="chakra-code css-1dyqtvx">npm install -D jest-fetch-mock@3.0.3
</code></pre>
<p class="chakra-text css-1dxxm06">Add to <code class="chakra-code css-19xdaj1">package.json</code></p>
<pre class="css-0"><code class="chakra-code css-1dyqtvx">{
  &quot;jest&quot;: {
    &quot;automock&quot;: false,
    &quot;setupFiles&quot;: [&quot;./src/setupJest.js&quot;]
  }
}
</code></pre>
<p class="chakra-text css-1dxxm06">Create <code class="chakra-code css-19xdaj1">setupJest.js</code> in root.</p>
<pre class="css-0"><code class="chakra-code css-1dyqtvx">import { enableFetchMocks } from &quot;jest-fetch-mock&quot;;

enableFetchMocks();
</code></pre>
<p class="chakra-text css-1dxxm06">Implement in testing</p>
<pre class="css-0"><code class="chakra-code css-1dyqtvx">test(&quot;...&quot;, async () =&gt; {
	const breeds = [
		...
	];
	fetch.mockResponseOnce(
		JSON.stringify({
		animal: &quot;...&quot;,
		breeds,
		})
	);
	const { result, waitForNextUpdate } = renderHook(() =&gt; useBreedList(&quot;dog&quot;));
	await waitForNextUpdate();
	...
});
</code></pre>
<h3 class="chakra-heading css-ys5fw5">Snapshots</h3>
<p class="chakra-text css-1dxxm06">Snapshot tests are a low-cost way to write tests.</p>
<pre class="css-0"><code class="chakra-code css-1dyqtvx">npm install -D react-test-renderer@17.0.2.
</code></pre>
<p class="chakra-text css-1dxxm06">Add</p>
<pre class="css-0"><code class="chakra-code css-1dyqtvx">/**
 * @jest-environment jsdom
 */

import { expect, test } from &quot;@jest/globals&quot;;
import { create } from &quot;react-test-renderer&quot;;
import Results from &quot;../Results&quot;;

test(&quot;renders correctly with no pets&quot;, () =&gt; {
  const tree = create(&lt;Results pets={[]} /&gt;).toJSON();
  expect(tree).toMatchSnapshot();
});
</code></pre>
<p class="chakra-text css-1dxxm06">The snapshot will show on the CLI and create a <code class="chakra-code css-19xdaj1">__snapshots__</code> folder.</p>
<h3 class="chakra-heading css-ys5fw5">Test Coverage with Istanbul</h3>
<p class="chakra-text css-1dxxm06">Add command to <code class="chakra-code css-19xdaj1">package.json</code></p>
<pre class="css-0"><code class="chakra-code css-1dyqtvx">&quot;scripts&quot;: {
	...,
	&quot;test:coverage&quot;: &quot;jest --coverage&quot;
	...
}
</code></pre>
<p class="chakra-text css-1dxxm06">The script will generate a report of things that are covered and not coveredd with tests. It will also generate a <code class="chakra-code css-19xdaj1">index.html</code> file open in the browser by running</p>
<pre class="css-0"><code class="chakra-code css-1dyqtvx">open coverage/lcov-report/index.html
</code></pre>
<p class="chakra-text css-1dxxm06">Add <code class="chakra-code css-19xdaj1">coverage</code> to <code class="chakra-code css-19xdaj1">.gitignore</code></p></article></div><span></span></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Intermediate React, v4 - Notes","date":"2020-08-11","slug":"intermediate-react-v4-notes","content":"\r\nThis is the note I take as I watch this course \r\n[Intermediate React, v4 | FrontendMasters](https://frontendmasters.com/courses/intermediate-react-v4/)\r\n\r\n## Hooks in Depth\r\n\r\n### `useState`\r\n\r\nLets you manage state of React component.\r\n\r\n### `useEffect`\r\n\r\nLets you call side effect for component outside of normal render cycle. Second argument is used to determine dependencies. \r\n\r\n### `useContext`\r\n\r\nIf not using useContext, we have to pass context to component several levels lower way down (prop drilling). We can access/update context from child level. Using useContext solve this problem like a global variable, but it don't show the explicit relationship between components.\r\n\r\n### `useRef`\r\n\r\nuseRef difference from useState is that it's a reference to the DOM element. useState will be changed when component re-renders, but useRef will be changed when component unmounts.\r\n\r\n### `useReducer`\r\n\r\nBasically useState with extra steps to manage state using dispatch, break it and make it testable. Using the reducer with the same state and action will always return the same new state.\r\n\r\n### `useMemo`\r\n\r\nuseMemo is a function that memoizes a function or value. It's useful when you want to memoize a function that is expensive to compute or when you want to memoize a value that you expect to be constant (no need to recalculate).\r\n\r\n### `useCallback`\r\n\r\nSame as useMemo, useCallback is used for performance optimization. It's a function that memoizes a function and only recalculates if the dependencies change.\r\n\r\n### `useLayoutEffect`\r\n\r\nSame as useEffect, but it's called after the component has been mounted. It's synchronous to render. This is helpful because useLayout runs the same time as `componentDidMount` and `componentDidUpdaete` in class component, where `useEffect` is scheduled after. Use `useLayoutEffect` if it is guaranteed that the effect will run synchronously after the component has been mounted.\r\n\r\n### `useImperativeHandle`\r\n\r\nuseImperativeHandle is a function that lets you customize methods of object that is returned from useRef hook.  It's useful when you want to pass a ref to a component that is not a child of the component you are using it in, expecially on creating libraries.\r\n\r\n### `useDebugValue` \u0026 `useId`\r\n\r\nuseDebugValue can be used to expose custom value while debugging custom hooks in DevTools. useId is a function that generate a unique ID.\r\n\r\n## TailwindCSS\r\n\r\n### CSS \u0026 React\r\n\r\nTailwind is not tied to React. It's a CSS framework.\r\n\r\nInstall:\r\n```\r\nnpm i -D tailwindcss@3.0.22 postcss@8.4.6 autoprefixer@10.4.2\r\n```\r\n\r\nInit Tailwind project:\r\n```\r\nnpx tailwindcss init\r\n```\r\n\r\nThis will create a tailwind config in `tailwind.config.js`.\r\n\r\nThen add these line in the beginning of the global CSS file\r\n\r\n```css\r\n@tailwind base;\r\n@tailwind components;\r\n@tailwind utilities;\r\n```\r\n\r\nThen create `.postcssrc` in root directory\r\n\r\n```json\r\n{\r\n  \"plugins\": {\r\n    \"autoprefixer\": {},\r\n    \"tailwindcss\": {}\r\n  }\r\n}\r\n```\r\n\r\n### Basics \u0026 Gradients\r\n\r\nBasically, working with Tailwind CSS require us to implement CSS rules via adding `className` to our component so component will have a long className string from Tailwind. But sometimes we will have to add some custom style e.g. background image because Tailwind doesn't support it.\r\n\r\n```jsx\r\n\u003cdiv\r\n\tclassName=\"p-0 m-0\"\r\n\tstyle={{\r\n\t\tbackground: \"url(http://pets-images.dev-apis.com/pets/wallpaperA.jpg)\",\r\n\t}}\r\n\u003e\r\n  \t...\r\n\u003c/div\u003e\r\n```\r\n\r\nMore Tailwind CSS class can be found at the docs.\r\n\r\n### CSS Libraries\r\n\r\nUsing Tailwind will make our CSS size much smaller. There are several other tools to do styling, including emotion and styled-components. They are good if we need to have some javascript functionality in our CSS like computing colors, etc.\r\n\r\n### Layout Basics\r\n\r\nWe can also use Tailwind to layout our components using flex.\r\n\r\n### Tailwind Plugins\r\n\r\nThere are several component styling by Tailwind CSS. Install it with\r\n\r\n```\r\nnpm install -D @tailwindcss/forms@0.4.0.\r\n```\r\n\r\nThis will apply some default styling to basic form elements. In text input, add `type=text` so it will be styled as a text input.\r\n\r\n### Grid \u0026 Breakpoints\r\n\r\nWe can also use Tailwind to layout our components using grid and it's much easier than using pure CSS. We can also make it responsive.\r\n\r\n### Positioning\r\n\r\nWe can also have relative positioning in CSS.\r\n\r\n## Code Splitting \u0026 Server Side Rendering\r\n\r\n### Code Splitting\r\n\r\nCode splitting is a technique to split our application into smaller parts so the application won't be loaded all at once. This is useful when we have a big application and we want to load it faster. To implement this, we can use `Suspense` and `React.lazy` in router.\r\n\r\n```jsx\r\nimport { useState, StrictMode, lazy, Suspense } from \"react\";\r\n\r\nconst Details = lazy(() =\u003e import(\"./Details\"));\r\nconst SearchParams = lazy(() =\u003e import(\"./SearchParams\"));\r\n\r\nconst App = () =\u003e {\r\n\treturn (\r\n\t\t\u003cSuspense fallback={\u003ch1\u003eloading route...\u003c/h1\u003e}\u003e\r\n\t\t\t\u003cBrowserRouter\u003e\r\n\t\t\t\t...\r\n\t\t\t\u003c/BrowserRouter\u003e\r\n\t\t\u003c/Suspense\u003e\r\n\t);\r\n}\r\n```\r\n\r\nOther than this, the code can be load asynchronously with `lazy`.\r\n\r\n```jsx\r\nimport { ..., lazy } from \"react\";\r\n\r\nconst Modal = lazy(() =\u003e import(\"./Modal\"));\r\n```\r\n\r\n### Server Side Rendering\r\n\r\nPerformance is a big concern when we have a big application. There are several ways to improve performance. One challenge is to load the correct content first so user can see the site faster.\r\n\r\nServer side rendering is a technique to run React on the server before send it to the user and send the first rendering of the application. The user will only has to download the HTML and see the page, otherwise the user has to download HTML, JS, and load it before showing anything. The total time is relative slower because the React app is loading in the background, but the time the user see something on the page is much faster.\r\n\r\nTo implement SSR, we have o change where our app is rendered. We use `hydrate` from `react-dom` instead of `render`, and then achieve it using Express and Node.\r\n\r\n### Streaming Markup\r\n\r\nWe can use *streaming* when making HTTP request so we can send response in chunks (partially rendered) instead of sending the whole big payload at the end. Browser can immediately start downloading CSS while the app is loading. To implement this, we can use `renderToNodeStream` from `react-dom/server`.\r\n\r\n## TypeScript\r\n\r\nTypescript make you write javascript code in a more strict way. It's a good way to make sure your team don't make mistakes as the project scales up. TypeScript make the code more readable and maintainable.\r\n\r\n### Setup \u0026 Refactoring\r\n\r\nInstall\r\n\r\n```\r\nnpm install -D typescript@4.5.5\r\n```\r\n\r\nThen run\r\n```\r\nnpx tsc --init\r\n```\r\n\r\nIt will generate `tsconfig.json` file. Some React dependency types are required to be installed.\r\n\r\n```\r\nnpm install -D @types/react@17.0.39 @types/react-dom@17.0.11\r\n```\r\n\r\n### TypeScript \u0026 ESLint\r\n\r\nThere is a project called `typescript-eslint` to replace TSLint (deprecated) that can be used to lint TypeScript code using ESLint.\r\n\r\n```\r\nnpm install -D eslint-import-resolver-typescript@2.5.0 @typescript-eslint/eslint-plugin@5.13.0 @typescript-eslint/parser@5.13.0\r\n```\r\n\r\nChange `package.json` \"lint\" entry to \r\n```json\r\n\"scrips\": {\r\n\t...\r\n\t\"lint\": \"eslint \\\"src/**/*.{js,jsx,ts,tsx}\\\" --quiet\",\r\n\t...\r\n}\r\n```\r\n\r\nModify `.eslintrc.json`\r\n\r\n```json\r\n{\r\n\t\"extends\": [\r\n\t\t...,\r\n\t\t\"plugin:@typescript-eslint/recommended\",\r\n\t\t\"plugin:@typescript-eslint/recommended-requiring-type-checking\",\r\n\t\t\"prettier\"\r\n\t],\r\n\t\"rules\": {\r\n\t\t...,\r\n\t\t\"@typescript-eslint/no-empty-function\": 0\r\n\t},\r\n\t\"plugins\": [..., \"@typescript-eslint\"],\r\n\t\"parserOptions\": {\r\n\t\t...,\r\n\t\t\"project\": [\"./tsconfig.json\"],\r\n\t\t...\r\n\t}\r\n\t...,\r\n\t\"settings\": {\r\n\t\t...,\r\n\t\t\"import/parsers\": {\r\n\t\t\t\"@typescript-eslint/parser\": [\".ts\", \".tsx\"]\r\n\t\t},\r\n\t\t\"import/resolver\": {\r\n\t\t\t\"typescript\": {\r\n\t\t\t\t\"alwaysTryTypes\": true\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\n### TypeScript Basic Notes\r\n\r\n1. We can have a strict ordering of string and function which will be enforced to make other file easier to type.\r\n\r\n2. `interface` is a way to define a object-like type that can be used in other file. Use interfaces unless you need type aliases.\r\n\r\n\t```ts\r\n\t// by export it, we can use it in other file\r\n\texport interface Pet {\r\n\t\tid: number;\r\n\t\tname: string;\r\n\t\t...\r\n\t}\r\n\r\n\texport interface PetAPIResponse {\r\n\t\tnumberOfResults: number;\r\n\t\t...\r\n\t}\r\n\t```\r\n\r\n3. We can make a custom, more-strict type alias that just allows a few different values by declare it with `type`.\r\n\r\n\t```ts\r\n\texport type Animal = \"dog\" | \"cat\";\r\n\t```\r\n\r\n4. The type of a value can be enforced with `... as ...` syntax.\r\n\r\n5. If the param can be undefined, we can use `?` to make it optional.\r\n\r\nAdd type check to `package.json`\r\n\r\n```\r\n\"scripts\": {\r\n\t...,\r\n\t\"typecheck\": \"tsc --noEmit\",\r\n\t...\r\n}\r\n```\r\n\r\n## Redux\r\n\r\nRedux is a library that does state management. Back then, Redux was made to replace Context that used to be worse in React. One feature of Redux is that it is testable.\r\n\r\nInstall Redux\r\n\r\n```\r\nnpm install redux@4.1.2 react-redux@7.2.6\r\n```\r\n\r\nIncluding Redux middleware\r\n```js\r\nimport { createStore } from \"redux\";\r\nimport reducer from \"./reducers\";\r\n\r\nconst store = createStore(\r\n\treducer,\r\n\ttypeof window === \"object\" \u0026\u0026\r\n\t\ttypeof window.__REDUX_DEVTOOLS_EXTENSION__ !== \"undefined\"\r\n\t\t? window.__REDUX_DEVTOOLS_EXTENSION__()\r\n\t\t: (f) =\u003e f\r\n);\r\n\r\nexport default store;\r\n```\r\n### Reducers\r\n\r\ncombineReducers is a function that takes an object of reducers and returns a reducer function.\r\n\r\n```js\r\nimport { combineReducers } from \"redux\";\r\nimport location from \"./location\";\r\n\r\nexport default combineReducers({\r\n  location,\r\n  ...\r\n});\r\n```\r\n\r\nReducer takes an old state, an action, and combines those things to make a state. A reducer must have a default state. Reducer are synchronous.\r\n\r\n```js\r\nexport default function location(state = \"Seattle, WA\", action) {\r\n  switch (action.type) {\r\n    case \"CHANGE_LOCATION\":\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n```\r\n\r\n### Action Creators\r\n\r\nAction Creators are functions that return action objects.\r\n\r\n```js\r\nexport default function changeTheme(theme) {\r\n  return { type: \"CHANGE_THEME\", payload: theme };\r\n}\r\n```\r\n\r\n### Providers \u0026 Dispatching Actions\r\n\r\nProvider is a component that wraps the app and provides the store to the app.\r\n\r\n```jsx\r\nimport { Provider } from \"react-redux\";\r\nimport store from \"./store\";\r\n\r\nconst App = () =\u003e {\r\n\treturn (\r\n\t\t\u003cProvider store={store}\u003e\r\n\t\t\t\u003cApp /\u003e\r\n\t\t\u003c/Provider\u003e\r\n\t);\r\n}\r\n```\r\n\r\nNow we can use Redux in component.\r\n\r\n```jsx\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport changeLocation from \"./actionCreators/changeLocation\";\r\n...\r\n\r\nconst location = useSelector((state) =\u003e state.location);\r\n...\r\nconst dispatch = useDispatch();\r\n\r\nconst SearchParams = () =\u003e {\r\n\treturn (\r\n\t\t...\r\n\t\t\u003cinput\r\n\t\t\tid=\"location\"\r\n\t\t\tvalue={location}\r\n\t\t\tplaceholder=\"Location\"\r\n\t\t\tonChange={(e) =\u003e dispatch(changeLocation(e.target.value))}\r\n\t\t/\u003e\r\n\t\t...\r\n\t)\r\n}\r\n```\r\n\r\n\r\n### Redux Dev Tools\r\n\r\nRedux Dev Tools is a browser extension that allows us to see the state of the store.\r\n\r\n## Testing\r\n\r\nJest is a testing library that allows us to write tests in JavaScript. It is built on top of Jasmine.\r\n\r\nInstall Jest\r\n```\r\nnpm install -D jest@27.5.1 @testing-library/react@12.1.3\r\n```\r\n\r\nReplace `.babelrc` with\r\n```json\r\n{\r\n  \"presets\": [\r\n    [\r\n      \"@babel/preset-react\",\r\n      {\r\n        \"runtime\": \"automatic\"\r\n      }\r\n    ],\r\n    \"@babel/preset-env\"\r\n  ],\r\n  \"plugins\": [\"@babel/plugin-proposal-class-properties\"],\r\n  \"env\": {\r\n    \"test\": {\r\n      \"presets\": [\r\n        [\r\n          \"@babel/preset-env\",\r\n          {\r\n            \"targets\": {\r\n              \"node\": \"current\"\r\n            }\r\n          }\r\n        ]\r\n      ]\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nAdd `test` script to `package.json`\r\n```json\r\n\"scripts\": {\r\n\t...,\r\n\t\"test\": \"jest\",\r\n\t\"test:watch\": \"jest --watch\"\r\n\t...\r\n}\r\n```\r\n\r\n### Basic React Testing\r\n\r\n- Try to test functionality, not implementation\r\n- Don't test UI or something that likely to change, test the action to the UI instead\r\n- Test the important part to the user\r\n- Delete test on a regular basis\r\n- Fix/delete bad test\r\n\r\nBasic test file has extension `.test.js` or `.spec.js`\r\n\r\n```js\r\nimport { expect, test } from \"@jest/globals\";\r\nimport { render } from \"@testing-library/react\";\r\nimport Pet from \"../Pet.js\"; // the component\r\n\r\ntest(\"displays a default thumbnail\", async () =\u003e { // test case\r\n  const pet = render(\u003cPet /\u003e);\r\n\r\n  const petThumbnail = await pet.findByTestId(\"thumbnail\");\r\n  expect(petThumbnail.src).toContain(\"none.jpg\");\r\n});\r\n```\r\n\r\n`findByTestId` is a function that finds a component by its test id. To catch a specific component for testing, we can add a `data-testid` attribute to the component.\r\n\r\nFor testing custom hooks, we can make a fake component, or using `@testing-library/react-hooks`, then we can use `renderHook` to render a component.\r\n\r\n### Mocks\r\n\r\nTo test a component that uses a library that is not available in the browser, we can mock the library. A mock is a fake implementation.\r\n\r\nInstall\r\n\r\n```\r\nnpm install -D jest-fetch-mock@3.0.3\r\n```\r\n\r\nAdd to `package.json`\r\n\r\n```json\r\n{\r\n  \"jest\": {\r\n    \"automock\": false,\r\n    \"setupFiles\": [\"./src/setupJest.js\"]\r\n  }\r\n}\r\n```\r\n\r\nCreate `setupJest.js` in root.\r\n\r\n```js\r\nimport { enableFetchMocks } from \"jest-fetch-mock\";\r\n\r\nenableFetchMocks();\r\n```\r\n\r\nImplement in testing\r\n\r\n```js\r\ntest(\"...\", async () =\u003e {\r\n\tconst breeds = [\r\n\t\t...\r\n\t];\r\n\tfetch.mockResponseOnce(\r\n\t\tJSON.stringify({\r\n\t\tanimal: \"...\",\r\n\t\tbreeds,\r\n\t\t})\r\n\t);\r\n\tconst { result, waitForNextUpdate } = renderHook(() =\u003e useBreedList(\"dog\"));\r\n\tawait waitForNextUpdate();\r\n\t...\r\n});\r\n```\r\n\r\n### Snapshots\r\n\r\nSnapshot tests are a low-cost way to write tests.\r\n\r\n```\r\nnpm install -D react-test-renderer@17.0.2.\r\n```\r\n\r\nAdd\r\n```js\r\n/**\r\n * @jest-environment jsdom\r\n */\r\n\r\nimport { expect, test } from \"@jest/globals\";\r\nimport { create } from \"react-test-renderer\";\r\nimport Results from \"../Results\";\r\n\r\ntest(\"renders correctly with no pets\", () =\u003e {\r\n  const tree = create(\u003cResults pets={[]} /\u003e).toJSON();\r\n  expect(tree).toMatchSnapshot();\r\n});\r\n```\r\n\r\nThe snapshot will show on the CLI and create a `__snapshots__` folder.\r\n\r\n### Test Coverage with Istanbul\r\n\r\nAdd command to `package.json`\r\n\r\n```json\r\n\"scripts\": {\r\n\t...,\r\n\t\"test:coverage\": \"jest --coverage\"\r\n\t...\r\n}\r\n```\r\n\r\nThe script will generate a report of things that are covered and not coveredd with tests. It will also generate a `index.html` file open in the browser by running\r\n```\r\nopen coverage/lcov-report/index.html\r\n```\r\n\r\nAdd `coverage` to `.gitignore`"}},"__N_SSG":true},"page":"/blog/post/[slug]","query":{"slug":"intermediate-react-v4-notes"},"buildId":"FOJfMnHBnYPL-pV1-BhdU","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>